<ul class="card-text font-weight-light list-group list-group-flush">
  {%- comment -%}
  Build a numeric sort_year (from endDate, startDate, or date string).
  Force descending sort so that newer years (e.g. 2025) appear first.
  {%- endcomment -%}

  {% assign work = data[1] %}
  {% assign sorted = "" | split: "" %}

  {% for item in work %}
    {% assign year = 0 %}
    {% if item.endDate %}
      {% assign year = item.endDate | slice: 0, 4 | plus: 0 %}
    {% elsif item.startDate %}
      {% assign year = item.startDate | slice: 0, 4 | plus: 0 %}
    {% elsif item.date %}
      {% assign year_str = item.date | regex_replace: '[^0-9]', '' %}
      {% assign year = year_str | slice: 0, 4 | plus: 0 %}
    {% endif %}
    {% assign item = item | merge: { "sort_year": year } %}
    {% assign sorted = sorted | push: item %}
  {% endfor %}

  {%- assign work_sorted = sorted | sort: "sort_year" -%}

  {% for content in work_sorted %}
    <li class="list-group-item">
      <div class="row">
        <div class="col-xs-2 cl-sm-2 col-md-2 text-center date-column">
          {% if content.date %}
            {%- assign date = content.date -%}
          {% elsif content.startDate %}
            {% assign startDate = content.startDate | split: '-' | slice: 0, 2 | join: '.' %}
            {% assign endDate = content.endDate | split: '-' | slice: 0, 2 | join: '.' | default: 'Present' %}
            {% assign date = startDate | append: ' - ' | append: endDate %}
          {% else %}
            {% assign date = '' %}
          {% endif %}
          <table class="table-cv">
            <tbody>
              <tr>
                <td>
                  <span class="badge font-weight-bold danger-color-dark text-uppercase align-middle" style="min-width: 75px"> {{ date }} </span>
                </td>
              </tr>
              {% if content.location %}
                <tr>
                  <td>
                    <p class="location">
                      <i class="fa-solid fa-location-dot iconlocation"></i>
                      {{ content.location }}
                    </p>
                  </td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
        <div class="col-xs-10 cl-sm-10 col-md-10 mt-2 mt-md-0">
          <h6 class="title font-weight-bold ml-1 ml-md-4">
            <a href="{{ content.url }}">{{ content.position }}</a>
          </h6>
          <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem">{{ content.name }}</h6>
          <h6 class="ml-1 ml-md-4" style="font-size: 0.95rem; font-style: italic">{{ content.summary }}</h6>
          <ul class="items">
            {% for item in content.highlights %}
              <li>
                <span class="item">{{ item }}</span>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </li>
  {% endfor %}
</ul>
